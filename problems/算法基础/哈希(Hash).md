# å“ˆå¸Œ(Hash)
## æ¦‚å¿µåŠåº”ç”¨
* å°†ä¸€äº›å¤§æ•°é€šè¿‡å–æ¨¡**æ˜ å°„**åˆ°ä¸€ä¸ªæ•°ç»„é‡Œ
* åˆ¤æ–­ä¸¤ä¸ªæ•°æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆé‡Œ
* åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰
* åŸºæœ¬æ“ä½œä¸ºæ’å…¥å’Œå¯»æ‰¾
## æ¨¡æ‹Ÿæ•£åˆ—è¡¨
* åŸºæœ¬çš„æ’å…¥å’Œå¯»æ‰¾ï¼Œå¯¹äºå–æ¨¡äº§ç”Ÿçš„å†²çªç”¨å¯ä»¥ä¸¤ç§æ–¹å¼å­˜å‚¨å¤„ç†,åŸºæœ¬å–æ¨¡æ˜¯(x%N+N)%Nï¼Œæ­¤æ—¶ä¸€å®šæ˜¯æ­£æ•°
### æ‹‰é“¾æ³•
* å¯¹äºæ¯ä¸€ä¸ªå–æ¨¡åçš„æ•°å¼€ä¸€ä¸ªé“¾è¡¨ï¼Œç”¨é“¾è¡¨å­˜å‚¨ç›¸åŒçš„å“ˆå¸Œå€¼å¯¹åº”çš„ä¸åŒçš„åŸå€¼ï¼Œå…¶ä¸­å–æ¨¡çš„Nè¦è®¾å®šä¸ºå¤§äºæ€»æ•°çš„ç¬¬ä¸€ä¸ªè´¨æ•°
```c++
//https://www.acwing.com/problem/content/842/
//è®°å¾—åˆå§‹åŒ–
#include <iostream>
#include <cstring>
using namespace std;
const int N = 100003;
int h[N],e[N],ne[N],idx;//h[N]å³æ˜¯hashä¹Ÿæ˜¯å¤´èŠ‚ç‚¹
void insert(int x){//reflect
    int k=(x%N+N)%N;
    e[idx]=x;
    ne[idx]=h[k];//å¤´èŠ‚ç‚¹æ’å…¥
    h[k]=idx++;
}
bool find(int x){
    int k=(x%N+N)%N;//éå†
    for(int i=h[k];i!=-1;i=ne[i]){//æŒ‡å‘ä¸‹ä¸€ä¸ª
        if(e[i]==x) return true;
    }
    return false;
}
int main(){
    int n;
    scanf("%d",&n);
    memset(h,-1,sizeof(h));//åˆå§‹åŒ–è¾¹ç•Œæ˜¯-1
    while(n--){
        char op[2];
        int x;
        scanf("%s%d",op,&x);
        if(*op =='I') insert(x);
        else{
            if(find(x)) cout<<"Yes"<<endl;
            else cout<<"No"<<endl;
        }
    }
    return 0;
}
```
### å¼€æ”¾å¯»å€å‘
* å¯¹äºæ¯ä¸€ä¸ªå†²çªçš„æ•°ï¼Œé€‰æ‹©å¾€åæ‰¾ç©ºçš„ä½ç½®ï¼Œä½ç½®ä¸€å®šæ˜¯å¤Ÿçš„,å¦‚æœåˆ°å¤´å°±ä»å¤´å¼€å§‹,å¯¹äºæ¯ä¸€ä¸ªä½ç½®éƒ½ç»§ç»­åˆå§‹åŒ–ä¸º0x3f3f3f3f
```c++
//https://www.acwing.com/problem/content/842/
#include <iostream>
#include <cstring>
using namespace std;
const int N = 200003,null=0x3f3f3f3f;//è‡ªå®šä¹‰ä¸€ä¸ªæ ‡å¿—null
int h[N];
int find(int x){
    int t=(x%N+N)%N;
    while(h[t]!=null&&h[t]!=x){//å¯èƒ½å·²ç»å½•å…¥ï¼Œç›´åˆ°æ‰¾åˆ°ç©ºçš„ä½ç½®ï¼Œæœ‰è¶³å¤Ÿçš„ä½ç½®
        t++;//æ‰¾åˆ°nullæˆ–è€…æ‰¾åˆ°x,å­˜å’Œå–
        if(t==N) t=0;//ä»tå¼€å§‹ï¼Œåˆ°å°¾å°±è·³åˆ°å¤´ç»§ç»­éå†
    }
    return t;//tæ˜¯xåº”è¯¥åœ¨çš„ä½ç½®ï¼Œh[t]è¦ä¹ˆæ˜¯xï¼Œè¦ä¹ˆæ˜¯0x3f
}
int main(){
    int n;
    scanf("%d",&n);
    memset(h,null,sizeof(h));//å…¨éƒ¨åˆå§‹åŒ–ä¸ºç‰¹å®šå€¼
    while(n--){
        char op[2];
        int x;
        scanf("%s%d",op,&x);
        int k=find(x);
        if(*op=='I') h[k]=x;
        else{
            if(h[k]!=null) cout<<"Yes"<<endl;
            else cout<<"No"<<endl;
        }
    }
    return 0;
}
```
## å­—ç¬¦ä¸²å“ˆå¸Œ
### æ¦‚æ‹¬åŠåº”ç”¨
* æŠŠå­—ç¬¦ä¸²æ˜ å°„åˆ°æ•´æ•°çš„å‡½æ•° ğ‘“ï¼Œè¿™ä¸ª ğ‘“ ç§°ä¸ºæ˜¯ Hash å‡½æ•°
* åœ¨ Hash å‡½æ•°å€¼ä¸ä¸€æ ·çš„æ—¶å€™ï¼Œä¸¤ä¸ªå­—ç¬¦ä¸²ä¸€å®šä¸ä¸€æ ·ï¼›
* å¯ä»¥ç”¨æ¥æ¯”è¾ƒå­—ç¬¦ä¸²ä¸­çš„å­å­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒæˆ–è€…ä¸¤æ¡å­—ç¬¦ä¸²åŒ¹é…
### æ–¹æ³•
* çœ‹æˆpè¿›åˆ¶æ•°ï¼Œç¬¬ä¸€ä¸ªä¹˜ä¸€ä¸ªpï¼Œç¬¬äºŒä¸ªä¹˜2ä¸ªpï¼Œæœ¬æ¥åº”è¯¥ç¬¬ä¸€ä¸ªæ˜¯æœ€é«˜ä½ï¼Œæ‰€ä»¥è®¡ç®—çš„æ—¶å€™è¦è¡¥ä½æ•°å·®ï¼ŒåŒæ—¶åœ¨ä¸€æ¡å­—ç¬¦ä¸²ä¸­çš„è¯ï¼Œåˆ©ç”¨å‰ç¼€å’Œå¯ä»¥é«˜æ•ˆçš„è®¡ç®—æŸæ®µçš„å“ˆå¸Œå€¼
* ç”¨unsigned long long å¯ä»¥ç›´æ¥å¤„ç†å“ˆå¸Œæº¢å‡º
* Pè¿›åˆ¶é»˜è®¤131
* å‰ç¼€å’Œä»1å¼€å§‹ï¼Œå­—ç¬¦å­—ç¬¦ä¸²è¯»å…¥çš„æ—¶å€™ä¹Ÿæ˜¯1å¼€å§‹ï¼Œç”¨h[r]-h[l-1]*p[r-l+1]è®¡ç®—æ®µè½å“ˆå¸Œå€¼
```c++
//https://www.acwing.com/problem/content/843/
#include <iostream>
using namespace std;
typedef unsigned long long ULL;
const int N = 100010,P=131;
int n,m;
char str[N];
ULL h[N],p[N];//ULL,pè¡¨ç¤ºå€æ•°å·®
ULL get(int l,int r){
    return h[r]-h[l-1]*p[r-l+1];//å·¦ç§»pä½,å‰ç¼€å’Œæ‰€ä»¥-1  
}
int main(){
    scanf("%d%d%s",&n,&m,str+1);//è¦+1ï¼Œä»1å¼€å§‹
    p[0]=1;//å€æ•°
    for(int i=1;i<=n;i++){//åº”è¯¥æ˜¯å·¦è¾¹é«˜ä½ï¼Œä½†ç°åœ¨æ˜¯å³è¾¹é«˜ï¼Œæ‰€ä»¥å·¦è¾¹è¦ä¹˜ä¸Šå€æ•°
        p[i]=p[i-1]*P;//é€šè¿‡å€æ•°ä½¿ä¸¤ä¸ªæ•°å¯¹é½
        h[i]=h[i-1]*P+str[i];//æ­¤æ—¶ä¹˜äº†P
    }
    while(m--){
        int l1,r1,l2,r2;
        scanf("%d%d%d%d",&l1,&r1,&l2,&r2);
        if(get(l1,r1)==get(l2,r2)) puts("Yes");
        else puts("No");
    }
    return 0;
}
```